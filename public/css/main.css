:root{
  --bg: #0b1018;
  --panel: #141a24;
  --text: #e8eaf0;
  --muted: rgba(232,234,240,.7);
  --line: rgba(220,228,241,.14);
  --accent: #5f99dc;
  --accent-warm: #b79a63;
  --accent-warm-soft: rgba(183,154,99,.18);
  --accent-cool-soft: rgba(95,153,220,.22);
  --radius: var(--radius-md);
  --shadow: 0 14px 36px rgba(0,0,0,.38);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(920px 560px at 86% -8%, rgba(183, 154, 99, .08), transparent 64%),
    radial-gradient(1150px 760px at 16% -6%, rgba(97, 130, 178, .12), transparent 58%),
    radial-gradient(920px 660px at 88% 2%, rgba(78, 108, 150, .08), transparent 62%),
    linear-gradient(180deg, #0a1019 0%, #0b111a 46%, #0a0f17 100%);
  color:var(--text);
  font-family: var(--font-family-body);
  font-size: var(--font-body);
  line-height:1.5;
}

a{color:inherit}
.container{max-width:1050px;margin:0 auto;padding:0 var(--space-2)}
.header{border-bottom:1px solid rgba(183,154,99,.2);backdrop-filter: blur(10px);position:sticky;top:0;background:rgba(9,13,21,.72);z-index:1200}
.nav{display:flex;align-items:center;justify-content:space-between;padding:var(--space-2) 0;gap:var(--space-2)}
.logo{font-weight:800;text-decoration:none;letter-spacing:.2px}
.logo{
  display:inline-flex;
  align-items:center;
}

.logo img{
  width:44px;
  height:44px;
  object-fit:contain;
  display:block;
}
.nav-actions{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:var(--space-1);
}

.burger-menu{
  position:relative;
}

.burger-toggle{
  width:var(--touch-target-min);
  height:var(--touch-target-min);
  border-radius:var(--radius-md);
  border:1px solid rgba(78,161,255,.45);
  background:rgba(78,161,255,.18);
  color:var(--text);
  padding:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:var(--icon-size);
}

.burger-popover{
  position:absolute;
  right:0;
  top:46px;
  width:min(320px, calc(100vw - 24px));
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:linear-gradient(180deg, rgba(24,31,47,.98), rgba(15,21,35,.98));
  padding:var(--space-1);
  z-index:1300;
  box-shadow:0 14px 28px rgba(0,0,0,.35);
  display:grid;
  gap:4px;
}

.burger-popover a{
  text-decoration:none;
  color:var(--text);
  padding:var(--space-1) calc(var(--space-1) + 2px);
  border-radius:var(--radius-md);
}

.burger-popover a:hover{
  background:rgba(255,255,255,.06);
}
.badge{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid rgba(183,154,99,.28);border-radius:999px;background:linear-gradient(180deg, var(--accent-warm-soft), rgba(255,255,255,.02))}
.main{padding:28px 0 60px}
body.portal-fav-open .main{
  padding-bottom:calc(var(--bottom-nav-height) + var(--space-4) + env(safe-area-inset-bottom, 0px));
}
.site-footer{
  border-top:1px solid var(--line);
  background:rgba(8,12,20,.55);
  backdrop-filter: blur(6px);
}
.site-footer__inner{
  min-height:62px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-2);
}
.site-footer__links{
  display:flex;
  align-items:center;
  gap:14px;
  flex-wrap:wrap;
}
.site-footer__links a{
  color:var(--muted);
  text-decoration:none;
}
.site-footer__links a:hover{
  color:var(--text);
  text-decoration:underline;
}
.card{background:linear-gradient(180deg, rgba(255,255,255,.028), rgba(255,255,255,.015));border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow)}
.card__body{padding:var(--space-2)}
h1,h2,h3{margin:0 0 var(--space-2)}
p{margin:0 0 var(--space-2);color:var(--muted)}
.grid{display:grid;gap:var(--space-2)}
@media(min-width:900px){.grid.cols2{grid-template-columns:1fr 1fr}}
@media(max-width:720px){
  .site-footer__inner{
    flex-direction:column;
    align-items:flex-start;
    padding:10px 0;
  }
}

input:not([type="checkbox"]):not([type="radio"]),
button,
textarea,
select{
  font:inherit;
  border-radius:var(--radius-md);
  border:1px solid var(--line);
  background:rgba(255,255,255,.03);
  color:var(--text);
  padding:0 var(--space-2);
  min-height:var(--control-height);
}
textarea{
  min-height:calc(var(--control-height) * 2);
  padding:var(--space-1) var(--space-2);
}
input:disabled,textarea:disabled,select:disabled{
  opacity:.78;
  color:rgba(232,234,240,.85);
  background:rgba(255,255,255,.02);
  cursor:not-allowed;
}
label{display:grid;gap:var(--space-1);margin:var(--space-1) 0}
button{cursor:pointer}
button.primary{background:linear-gradient(180deg, var(--accent-cool-soft), rgba(255,255,255,.04));border-color:rgba(95,153,220,.45)}
button.primary:hover{background:linear-gradient(180deg, rgba(95,153,220,.3), rgba(255,255,255,.05))}
.small{font-size:var(--font-secondary-rem)}
hr{border:none;border-top:1px solid var(--line);margin:var(--space-2) 0}
.hidden{display:none !important}

.feed-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:1px solid rgba(95,153,220,.46);
  background:linear-gradient(180deg, var(--accent-cool-soft), rgba(255,255,255,.03));
  color:var(--text);
  padding:0 var(--space-2);
  min-height:var(--control-height);
  border-radius:var(--radius-md);
}
.feed-btn--ghost{
  border-color:var(--line);
  background:rgba(255,255,255,.03);
}

.feed-shell{
  width:min(100%, 1080px);
  margin:1rem auto;
  padding:1rem;
  border:1px solid var(--line);
  border-radius:var(--radius);
  background:linear-gradient(180deg, rgba(21,30,48,.92), rgba(16,23,38,.9));
  box-shadow:var(--shadow);
}

.home-hero-slider{
  width:min(100%, 1080px);
  margin:0 auto 1rem;
  border:1px solid var(--line);
  border-radius:18px;
  overflow:hidden;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  box-shadow:var(--shadow);
}

.home-hero-slider__track{
  display:flex;
  width:400%;
  animation:homeHeroCycle 28s ease-in-out infinite;
}

.home-hero-slider__slide{
  flex:0 0 25%;
  margin:0;
  position:relative;
}

.home-hero-slider__slide img{
  width:100%;
  height:min(40vh, 420px);
  object-fit:cover;
  display:block;
  filter:saturate(.78) brightness(.7) contrast(1.03);
}

.home-hero-slider__slide::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(180deg, rgba(8,12,20,.04) 0%, rgba(8,12,20,.42) 65%, rgba(8,12,20,.72) 100%);
  pointer-events:none;
}

.home-hero-slider__slide figcaption{
  position:absolute;
  left:14px;
  bottom:14px;
  z-index:1;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(183,154,99,.4);
  background:rgba(10,15,24,.58);
  color:#f3f6fb;
  font-weight:700;
  letter-spacing:.01em;
  font-size:clamp(.86rem, .8rem + .4vw, 1.05rem);
}

@keyframes homeHeroCycle{
  0%, 21% { transform:translateX(0%); }
  25%, 46% { transform:translateX(-25%); }
  50%, 71% { transform:translateX(-50%); }
  75%, 96% { transform:translateX(-75%); }
  100% { transform:translateX(0%); }
}

.feed-toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  margin-bottom:1rem;
}

.feed-list{
  display:grid;
  gap:.8rem;
  margin-top:.8rem;
}

.feed-post{
  border:1px solid var(--line);
  border-radius:var(--radius);
  background:rgba(255,255,255,.03);
  padding:.9rem;
  overflow:hidden;
}

.feed-form{
  width:100%;
}

.feed-composer{
  display:grid;
  gap:10px;
}

.feed-composer > label{
  margin:0;
}

.feed-composer textarea{
  width:100%;
  resize:vertical;
}

.feed-composer input,
.feed-composer select,
.feed-composer textarea{
  width:100%;
  min-width:0;
}

.feed-composer__actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
}

.feed-mode-panel{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  background:rgba(255,255,255,.02);
}

.feed-field--full{
  grid-column:1/-1;
}

.feed-youth-switch{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}

.feed-youth-switch .feed-btn{
  min-width:100px;
}

.feed-check{
  display:flex;
  gap:8px;
  align-items:center;
}

.feed-check input[type="checkbox"]{
  width:auto;
  margin:0;
}

.feed-post__head{
  display:grid;
  gap:.45rem .8rem;
  grid-template-columns:minmax(0, 1fr) auto;
  grid-template-areas:
    "title time"
    "meta meta";
  align-items:start;
}

.feed-post__head h3{
  margin:0;
  text-align:left;
}

.feed-post__title{
  grid-area:title;
}

.feed-post__time{
  grid-area:time;
  color:var(--muted);
  font-size:.85rem;
  white-space:nowrap;
  justify-self:end;
  align-self:start;
}

.feed-post__meta{
  grid-area:meta;
  display:inline-flex;
  align-items:center;
  gap:.5rem;
  color:var(--muted);
  font-size:.85rem;
  flex-wrap:wrap;
}

.feed-chip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:999px;
  padding:.2rem .6rem;
  background:rgba(78,161,255,.2);
  border:1px solid rgba(126,194,255,.45);
  color:#fff;
}

.feed-post__body{
  margin-top:.7rem;
  white-space:normal;
  line-height:1.7;
}

.feed-post__body::after{
  content:"";
  display:block;
  clear:both;
}

.feed-media{
  margin-top:.8rem;
  display:grid;
  gap:.65rem;
  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
}

.feed-media-picker{
  border:1px dashed rgba(126,194,255,.5);
  border-radius:12px;
  padding:10px;
  background:linear-gradient(180deg, rgba(95,153,220,.12), rgba(255,255,255,.02));
  cursor:pointer;
}

.feed-media-picker__title{
  font-weight:700;
}

.feed-media-picker__hint{
  color:var(--muted);
  font-size:.88rem;
}

.feed-media-picker__input{
  width:100%;
  max-width:100%;
  overflow:hidden;
  border:1px solid var(--line);
  background:rgba(255,255,255,.04);
  padding:8px;
  font-size:.95rem;
}

.feed-media-picker__input::file-selector-button{
  margin-right:10px;
  border:1px solid rgba(95,153,220,.56);
  border-radius:10px;
  background:linear-gradient(180deg, rgba(95,153,220,.28), rgba(95,153,220,.12));
  color:var(--text);
  padding:8px 10px;
  cursor:pointer;
}

.feed-media-picker:focus-within{
  border-color:rgba(95,153,220,.9);
  box-shadow:0 0 0 2px rgba(95,153,220,.2);
}

.feed-upload-progress{
  display:grid;
  gap:6px;
  margin-top:2px;
}

.feed-upload-progress progress{
  width:100%;
  height:12px;
  border:0;
  border-radius:999px;
  overflow:hidden;
}

.feed-upload-progress progress::-webkit-progress-bar{
  background:rgba(255,255,255,.12);
}

.feed-upload-progress progress::-webkit-progress-value{
  background:linear-gradient(90deg, rgba(95,153,220,.7), rgba(126,194,255,.95));
}

.feed-upload-progress progress::-moz-progress-bar{
  background:linear-gradient(90deg, rgba(95,153,220,.7), rgba(126,194,255,.95));
}

.feed-media-preview{
  margin-top:2px;
  display:grid;
  gap:8px;
  grid-template-columns:repeat(auto-fit, minmax(140px, 1fr));
}

.feed-media-preview__item{
  margin:0;
  border:1px solid var(--line);
  border-radius:10px;
  background:rgba(9,14,24,.9);
  overflow:hidden;
}

.feed-media-preview__img{
  width:100%;
  height:120px;
  object-fit:cover;
  display:block;
}

.feed-media-preview__item figcaption{
  padding:6px 8px;
  color:var(--muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.feed-image-dialog{
  width:min(96vw, 1200px);
  max-width:96vw;
  border:1px solid var(--line);
  border-radius:12px;
  padding:0;
  background:rgba(8,12,20,.98);
  overflow:hidden;
}

.feed-image-dialog::backdrop{
  background:rgba(0,0,0,.8);
}

.feed-image-dialog__inner{
  margin:0;
  padding:10px;
  position:relative;
}

.feed-image-dialog__close{
  position:absolute;
  top:8px;
  right:8px;
  width:36px;
  height:36px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.4);
  background:rgba(0,0,0,.5);
  color:#fff;
  font-size:1.4rem;
  line-height:1;
  padding:0;
}

.feed-image-dialog__img{
  display:block;
  width:100%;
  max-height:86vh;
  object-fit:contain;
}

.feed-media__item{
  margin:0;
  border:1px solid var(--line);
  border-radius:12px;
  background:rgba(9,14,24,.9);
  min-height:180px;
  max-height:420px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

.feed-media__img{
  width:100%;
  height:100%;
  max-height:420px;
  object-fit:contain;
  object-position:center;
  cursor:zoom-in;
}

.feed-media--inline{
  float:left;
  width:min(46%, 450px);
  max-width:450px;
  margin:.35rem 1rem .6rem 0;
  display:grid;
  grid-template-columns:1fr;
  gap:.5rem;
}

.feed-media--inline .feed-media__item{
  min-height:180px;
  max-height:420px;
  aspect-ratio: 4 / 5;
  background:transparent;
}

.feed-media--inline .feed-media__img{
  max-height:none;
  object-fit:cover;
}

.catch-water-overview{
  display:grid;
  gap:10px;
  margin:8px 0 12px;
}
.catch-water-group{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px 12px;
  background:rgba(255,255,255,.02);
}
.catch-water-group h3{
  margin:0 0 8px;
  font-size:1rem;
}
.catch-water-chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.catch-water-chip{
  display:inline-flex;
  align-items:center;
  gap:4px;
  border:1px solid rgba(78,161,255,.4);
  background:rgba(78,161,255,.14);
  border-radius:999px;
  padding:4px 10px;
  font-size:.85rem;
}

.catch-entry-card{
  width:100%;
  text-align:left;
}
.catch-entry-card .card__body{
  text-align:left;
}
.catch-entry-thumb{
  display:block;
  margin:8px 0;
  width:min(100%, 280px);
  max-height:170px;
  border:1px solid var(--line);
  border-radius:10px;
  object-fit:cover;
}

.catch-dialog{
  --dialog-sheet-width:min(92vw, 560px);
  position:fixed;
  top:0;
  bottom:0;
  left:auto;
  right:0;
  margin:0 0 0 auto;
  width:var(--dialog-sheet-width);
  max-width:var(--dialog-sheet-width);
  height:100dvh;
  max-height:100dvh;
  overflow:hidden;
  border:0;
  border-left:1px solid var(--line);
  border-radius:0;
  background:rgba(0,0,0,0);
  color:var(--text);
  box-shadow:var(--shadow);
  padding:0;
  opacity:0;
  transition:opacity .2s ease;
}
.catch-dialog::backdrop{
  background:rgba(0,0,0,.62);
}
.catch-dialog__form{
  width:100%;
  height:100%;
  max-height:100%;
  overflow:auto;
  -webkit-overflow-scrolling:touch;
  padding:16px max(16px, env(safe-area-inset-right)) max(16px, env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
  background:linear-gradient(180deg, rgba(22,27,37,.98), rgba(16,20,28,.98));
  transform:translateX(100%);
  transition:transform .24s ease;
}

body[data-portal-rail-side="left"] .catch-dialog{
  right:auto;
  left:0;
  margin:0 auto 0 0;
  border-left:0;
  border-right:1px solid var(--line);
}

body[data-portal-rail-side="left"] .catch-dialog__form{
  transform:translateX(-100%);
}

.catch-dialog[open]{
  opacity:1;
}

.catch-dialog[open] .catch-dialog__form{
  transform:translateX(0);
}
.catch-dialog__body{
  margin-top:8px;
}
.catch-dialog__actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:12px;
}
.catch-dialog-photo-wrap{
  margin-top:10px;
}
.catch-dialog-photo{
  width:min(100%, 560px);
  max-height:360px;
  border:1px solid var(--line);
  border-radius:10px;
  object-fit:contain;
  background:rgba(0,0,0,.25);
}

.catch-page{
  position:relative;
}

.catch-table-toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-top:10px;
}

.catch-table-toolbar h2{
  margin:0;
}

.catch-list-wrap{
  margin-top:10px;
}

.catch-table{
  border:1px solid var(--line);
  border-radius:14px;
  overflow:hidden;
}

.ui-container-toolbar{
  display:grid;
  gap:var(--space-1);
  margin:var(--space-1) 0 var(--space-2);
}

.ui-container-toolbar input[type="search"]{
  width:100%;
}

.ui-view-toggle{
  display:flex;
  flex-wrap:wrap;
  gap:var(--space-1);
}

.ui-column-panel{
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:rgba(255,255,255,.03);
  padding:var(--space-2);
  margin-bottom:var(--space-2);
  display:grid;
  gap:var(--space-2);
}

.ui-column-panel__block{
  display:grid;
  gap:var(--space-1);
}

.ui-column-panel__block h3{
  margin:0;
  text-align:left;
}

.ui-column-list{
  display:grid;
  gap:var(--space-1);
}

.ui-column-item{
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:rgba(255,255,255,.04);
  padding:var(--space-1);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-1);
  min-height:var(--touch-target-min);
}

.ui-column-item__actions{
  display:flex;
  gap:var(--space-1);
}

.ui-column-item input[type="checkbox"]{
  width:24px;
  height:24px;
}

.ui-filter-row{
  display:grid;
  gap:var(--space-1);
  grid-template-columns:repeat(3, minmax(0, 1fr));
  margin-bottom:var(--space-2);
}

.ui-filter-row label{
  margin:0;
}

.documents-head{
  grid-template-columns:repeat(5, minmax(0, 1fr));
  min-width:760px;
}

.documents-row{
  grid-template-columns:repeat(5, minmax(0, 1fr));
  min-width:760px;
}

.documents-head__cell{
  text-align:left;
}

.documents-head__button{
  width:100%;
  min-height:var(--control-height);
  background:transparent;
  border:1px solid transparent;
  color:var(--muted);
  border-radius:var(--radius-md);
  text-align:left;
  padding:0 var(--space-1);
}

#documentsTableWrap{
  overflow:auto;
  -webkit-overflow-scrolling:touch;
}

.documents-head__button:hover{
  border-color:var(--line);
  color:var(--text);
}

.documents-row__title{
  font-weight:700;
}

.documents-row__desc{
  color:var(--muted);
  font-size:var(--font-secondary-rem);
}

.ui-karten-grid{
  display:grid;
  gap:var(--space-2);
  grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
}

.ui-karte{
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:rgba(255,255,255,.03);
  padding:var(--space-2);
  display:grid;
  gap:var(--space-1);
  min-height:120px;
  text-align:left;
}

.ui-karte__kopf{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:var(--space-1);
}

.ui-karte__titel{
  margin:0;
  color:var(--text);
  text-align:left;
  font-size:1rem;
}

.ui-karte__meta{
  display:flex;
  gap:var(--space-1);
  flex-wrap:wrap;
}

.ui-chip{
  display:inline-flex;
  align-items:center;
  border:1px solid var(--line);
  border-radius:999px;
  padding:2px 10px;
  font-size:var(--font-secondary-rem);
  color:var(--text);
  background:rgba(255,255,255,.06);
}

.ui-chip.is-inaktiv{
  border-color:rgba(198,88,88,.6);
  background:rgba(198,88,88,.22);
}

.ui-karte__stand{
  color:var(--muted);
  font-size:var(--font-secondary-rem);
}

.catch-table__head{
  display:grid;
  grid-template-columns:120px 1fr 70px;
  gap:12px;
  align-items:center;
  padding:10px 12px;
  font-size:.82rem;
  letter-spacing:.02em;
  text-transform:uppercase;
  color:var(--muted);
  background:rgba(255,255,255,.06);
}

.catch-table__row{
  display:grid;
  grid-template-columns:120px 1fr 70px;
  gap:12px;
  align-items:center;
  width:100%;
  padding:12px;
  border:0;
  border-top:1px solid rgba(232,234,240,.06);
  color:var(--text);
  text-align:left;
  background:transparent;
}

.catch-table__row:nth-of-type(odd){
  background:rgba(255,255,255,.05);
}

.catch-table__row:nth-of-type(even){
  background:rgba(255,255,255,.1);
}

.catch-table__row > span{
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.catch-table__row:hover{
  background:rgba(95,153,220,.14);
}

.catch-row{
  display:grid;
  grid-template-columns:120px 1fr 70px;
  gap:12px;
  align-items:center;
  width:100%;
  padding:12px;
  border:0;
  border-top:1px solid rgba(232,234,240,.06);
  color:var(--text);
  text-align:left;
}

.catch-row:nth-of-type(odd){
  background:rgba(255,255,255,.05);
}

.catch-row:nth-of-type(even){
  background:rgba(255,255,255,.1);
}

.catch-row__date{
  font-variant-numeric:tabular-nums;
  white-space:nowrap;
}

.catch-row__meta{
  display:grid;
  gap:2px;
}

.catch-row__fish{
  color:var(--muted);
}

.catch-row__qty{
  text-align:right;
  font-weight:700;
  font-variant-numeric:tabular-nums;
}

.work-checkin-inline{
  display:grid;
  gap:10px;
  margin:10px 0 6px;
}

.work-card{
  width:100%;
}

.work-actions{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:8px;
}

.work-qr-box{
  margin-top:10px;
  display:flex;
  gap:12px;
  align-items:flex-start;
  flex-wrap:wrap;
}

.work-qr-box img{
  width:140px;
  height:140px;
  border-radius:10px;
  border:1px solid var(--line);
  background:#fff;
}

.card-qr-flip{
  width:160px;
  min-height:190px;
  perspective:1000px;
}

.card-qr-flip__inner{
  position:relative;
  width:100%;
  min-height:190px;
  transform-style:preserve-3d;
  transition:transform .5s ease;
}

.card-qr-flip.is-revealed .card-qr-flip__inner{
  transform:rotateY(180deg);
}

.card-qr-flip__face{
  position:absolute;
  inset:0;
  border:1px solid var(--line);
  border-radius:10px;
  background:rgba(255,255,255,.03);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:10px;
  backface-visibility:hidden;
}

.card-qr-flip__face--back{
  transform:rotateY(180deg);
}

.card-qr-flip__face img{
  display:block;
  width:140px;
  height:140px;
  border-radius:8px;
  border:1px solid var(--line);
  background:#fff;
}

.member-card-body{
  display:grid;
  gap:12px;
}

.member-card-top{
  display:grid;
  grid-template-columns:1fr auto;
  gap:10px;
  align-items:start;
}

.member-card-meta{
  display:grid;
  gap:6px;
  min-width:0;
}

.member-card-legal{
  padding:10px;
  border:1px solid var(--line);
  border-radius:10px;
  background:rgba(255,255,255,.03);
}

.work-participants{
  margin-top:10px;
  display:grid;
  gap:8px;
}

.work-part-summary{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:8px;
}

.work-part-table-wrap{
  overflow:auto;
  border:1px solid var(--line);
  border-radius:10px;
}

.work-part-table{
  width:100%;
  border-collapse:collapse;
  min-width:980px;
}

.work-member-table{
  min-width:0;
}

.work-part-table th,
.work-part-table td{
  border-bottom:1px solid var(--line);
  padding:8px 10px;
  vertical-align:top;
}

.work-part-table th{
  text-align:left;
  font-size:.88rem;
  color:var(--muted);
  background:rgba(255,255,255,.04);
}

.work-part-table tbody tr:last-child td{
  border-bottom:none;
}

.work-part-table td input{
  width:100%;
}

#respTaskTable{
  min-width:0;
  background:rgba(148, 156, 170, .18);
}

#respTaskTable tbody tr{
  background:rgba(232, 206, 116, .28);
}

#respTaskTable tbody tr:nth-child(even){
  background:rgba(232, 206, 116, .22);
}

#respTaskTable tbody tr:hover{
  background:rgba(232, 206, 116, .36);
}

.work-part-actions{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-bottom:6px;
}

.work-name-line{
  display:flex;
  align-items:center;
  gap:8px;
}

.work-approved-check{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:28px;
  height:20px;
  padding:0 8px;
  border-radius:999px;
  border:1px solid rgba(64, 180, 98, .75);
  background:rgba(64, 180, 98, .25);
  color:#dfffe8;
  font-size:.72rem;
  font-weight:800;
  line-height:1;
}

.work-edit-panel{
  display:grid;
  gap:6px;
  margin-bottom:6px;
}

.work-edit-panel label{
  display:grid;
  gap:4px;
}

.work-part-row--present td{
  background:rgba(38, 168, 84, .16);
}

.work-part-row--gone td{
  background:rgba(196, 64, 64, .16);
}

.work-part-row--neutral td{
  background:rgba(255,255,255,.02);
}

@media (max-width: 899px) and (orientation: portrait){
  .work-member-table .work-member-col--member-no,
  .work-member-table .work-member-col--presence{
    display:none;
  }

  .work-part-table--admin{
    min-width:0;
  }

  .work-part-table--admin .work-part-col--from,
  .work-part-table--admin .work-part-col--to,
  .work-part-table--admin .work-part-col--calc{
    display:none;
  }

  .work-part-table--admin .work-part-col--actions{
    min-width:230px;
  }

  .work-part-table--admin .work-part-actions{
    display:grid;
    grid-template-columns:1fr 1fr;
  }
}

@media (max-width: 899px) and (orientation: landscape){
  .work-part-table--admin{
    min-width:0;
  }

  .work-part-table--admin .work-part-col--calc{
    display:none;
  }

  .work-part-table--admin .work-part-col--actions{
    min-width:220px;
  }
}

.account-menu{
  position:relative;
  margin-left:auto;
}

.account-toggle{
  width:var(--touch-target-min);
  height:var(--touch-target-min);
  border-radius:999px;
  border:1px solid rgba(78,161,255,.45);
  background:rgba(78,161,255,.18);
  color:var(--text);
  padding:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}

.account-avatar{
  font-weight:700;
  font-size:var(--icon-size);
  line-height:1;
}

.account-popover{
  position:absolute;
  right:0;
  top:46px;
  min-width:210px;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:linear-gradient(180deg, rgba(24,31,47,.98), rgba(15,21,35,.98));
  padding:var(--space-1);
  display:grid;
  gap:8px;
  z-index:1300;
  box-shadow:0 14px 28px rgba(0,0,0,.35);
}

.portal-quick-toggle{
  --pq-size:clamp(56px, 14vw, 64px);
  position:fixed !important;
  bottom:calc(var(--space-2) + env(safe-area-inset-bottom, 0px)) !important;
  right:16px !important;
  z-index:1495;
  width:var(--pq-size);
  height:var(--pq-size);
  border-radius:var(--radius-md);
  border:1px solid rgba(95,153,220,.5);
  background:rgba(95,153,220,.2);
  color:var(--text);
  padding:0;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:var(--icon-size);
}

.portal-quick-user-badge{
  position:absolute;
  top:-8px;
  right:-8px;
  min-width:22px;
  height:22px;
  padding:0 6px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.35);
  background:rgba(11,18,32,.96);
  color:var(--text);
  font-size:11px;
  font-weight:700;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  line-height:1;
}

body[data-portal-rail-side="left"] .portal-quick-toggle{
  left:16px !important;
  right:auto !important;
}

body[data-portal-rail-side="right"] .portal-quick-toggle{
  right:16px !important;
  left:auto !important;
}

.portal-rail{
  --pq-size:clamp(56px, 14vw, 64px);
  --portal-rail-pad:max(4px, calc((var(--pq-size) - var(--touch-target-min)) / 2));
  position:fixed;
  bottom:calc(var(--space-2) + env(safe-area-inset-bottom, 0px));
  z-index:1490;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:linear-gradient(180deg, rgba(24,31,47,.96), rgba(15,21,35,.96));
  box-shadow:0 14px 28px rgba(0,0,0,.35);
  overflow:hidden;
  min-height:var(--pq-size);
  width:fit-content;
  max-width:calc(100vw - (2 * 16px) - var(--pq-size) - var(--space-1));
}

body[data-portal-rail-side="left"] .portal-rail{
  left:calc(16px + var(--pq-size) + var(--space-1));
  right:auto;
}

body[data-portal-rail-side="right"] .portal-rail{
  right:calc(16px + var(--pq-size) + var(--space-1));
  left:auto;
}

.portal-rail__items{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:var(--space-1);
  padding:var(--portal-rail-pad);
}

.portal-rail__item{
  min-height:var(--touch-target-min);
  width:var(--touch-target-min);
  display:grid;
  place-items:center;
  text-decoration:none;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  background:rgba(255,255,255,.04);
  margin:0 auto;
  color:var(--text);
  font-size:var(--font-secondary-rem);
}

.portal-quick-drawer{
  position:fixed;
  inset:0;
  z-index:1500;
  background:rgba(0,0,0,.54);
  opacity:0;
  pointer-events:none;
  transition:none;
}

body.portal-quick-open{
  overflow:hidden;
}

body.portal-quick-open .portal-quick-drawer{
  opacity:1;
  pointer-events:auto;
}

.portal-quick-panel{
  position:absolute;
  top:0;
  bottom:0;
  right:0;
  width:min(400px, calc(100vw - var(--space-3)));
  border:1px solid var(--line);
  background:linear-gradient(180deg, rgba(24,31,47,.98), rgba(15,21,35,.98));
  padding:var(--space-2);
  display:grid;
  align-content:start;
  gap:var(--space-1);
  overflow:auto;
  transition:none;
  will-change:transform;
  transform:translateX(100%);
}

body.portal-quick-ready .portal-quick-drawer{
  transition:opacity .2s ease;
}

body.portal-quick-ready .portal-quick-panel{
  transition:transform .24s ease;
}

body[data-portal-rail-side="left"] .portal-quick-panel{
  left:0;
  transform:translateX(-100%);
}

body[data-portal-rail-side="right"] .portal-quick-panel{
  right:0;
  transform:translateX(100%);
}

body.portal-quick-open[data-portal-rail-side="left"] .portal-quick-panel,
body.portal-quick-open[data-portal-rail-side="right"] .portal-quick-panel{
  transform:translateX(0);
}

.portal-quick-panel__head{
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:var(--space-1);
}

.portal-quick-panel__head h2{
  margin:0;
}

.portal-quick-list{
  display:grid;
  gap:var(--space-1);
  margin-top:var(--space-1);
}

.portal-quick-actions{
  margin-bottom:var(--space-1);
}

.portal-quick-group{
  display:grid;
  gap:var(--space-1);
}

.portal-quick-group__title{
  margin:0;
  color:var(--muted);
  text-transform:uppercase;
  font-size:12px;
  letter-spacing:.04em;
}

.portal-quick-group__list{
  display:grid;
  gap:var(--space-1);
}

.portal-quick-row{
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:10px 12px;
  background:rgba(255,255,255,.03);
  cursor:default;
}

.portal-quick-row[data-open-url]{
  cursor:pointer;
}

.portal-quick-row__line{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:var(--space-1);
}

.portal-quick-row__title{
  margin:0;
  color:var(--text);
  font-weight:600;
}

.portal-quick-row__actions{
  display:flex;
  gap:var(--space-1);
  margin-top:var(--space-1);
}

.portal-quick-star{
  min-width:24px;
  min-height:24px;
  border:none;
  background:transparent;
  color:rgba(232,237,247,.72);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  line-height:1;
  padding:0;
}

.portal-quick-star:hover{
  color:#ffd24a;
}

.portal-quick-star.is-active{
  color:#ffd24a;
}

.app-portal{
  width:100%;
}

.app-grid{
  display:grid;
  gap:var(--space-2);
  margin-top:var(--space-1);
  grid-template-columns:repeat(2, minmax(0, 1fr));
}

.app-entry{
  display:grid;
  gap:var(--space-1);
  align-content:start;
}

.app-tile{
  position:relative;
  text-decoration:none;
  border:1px solid var(--line);
  border-radius:var(--radius-md);
  padding:var(--space-1);
  min-height:96px;
  background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.022));
  display:flex;
  align-items:center;
  justify-content:center;
}

.portal-tile-star{
  position:absolute;
  top:8px;
  right:8px;
  width:24px;
  height:24px;
  min-width:24px;
  border:none;
  background:transparent;
  color:rgba(232,237,247,.72);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  line-height:1;
  font-size:24px;
  padding:0;
  z-index:2;
}

.portal-tile-star:hover,
.portal-tile-star.is-active{
  color:#ffd24a;
}

.app-tile__icon{
  width:100%;
  height:100%;
  min-height:78px;
  border-radius:var(--radius-md);
  border:1px solid rgba(183,154,99,.36);
  background:linear-gradient(180deg, rgba(95,153,220,.22), rgba(183,154,99,.13));
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:var(--icon-size);
}

.app-tile__title{
  font-weight:700;
  display:block;
}

.term-card{
  width:100%;
}

.feed-calendar-list{
  display:grid;
  gap:8px;
  margin-top:6px;
}

.feed-calendar-item{
  display:grid;
  gap:3px;
  border:1px solid var(--line);
  border-radius:10px;
  padding:8px 10px;
  background:rgba(255,255,255,.03);
}

.feed-calendar-item--upcoming{
  min-height:144px;
  padding:12px 62px;
}

.feed-upcoming-slider{
  position:relative;
  margin-top:6px;
}

.feed-upcoming-stage{
  padding:0;
}

.feed-upcoming-nav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:42px;
  height:42px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.34);
  background:linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.08));
  color:#fff;
  font-size:1.55rem;
  line-height:1;
  display:grid;
  place-items:center;
  z-index:2;
  backdrop-filter:blur(4px);
  box-shadow:0 8px 18px rgba(0,0,0,.25);
  overflow:hidden;
}

.feed-upcoming-nav::after{
  content:"";
  position:absolute;
  inset:-20%;
  background:linear-gradient(120deg, transparent 30%, rgba(255,255,255,.35) 50%, transparent 70%);
  transform:translateX(-120%);
  animation:feed-nav-shimmer 2.6s linear infinite;
  pointer-events:none;
}

.feed-upcoming-nav--prev{
  left:8px;
}

.feed-upcoming-nav--next{
  right:8px;
}

.feed-upcoming-nav:hover{
  filter:brightness(1.08);
}

.feed-upcoming-nav:focus-visible{
  outline:2px solid rgba(95,153,220,.9);
  outline-offset:2px;
}

.feed-upcoming-hint{
  margin:8px 2px 0;
  opacity:.85;
}

@keyframes feed-nav-shimmer{
  to{
    transform:translateX(120%);
  }
}

@media (max-width: 720px){
  .feed-calendar-item--upcoming{
    min-height:170px;
    padding:16px 70px 18px;
  }

  .feed-upcoming-nav{
    width:50px;
    height:50px;
    font-size:1.7rem;
    border-color:rgba(255,255,255,.42);
    background:linear-gradient(180deg, rgba(255,255,255,.24), rgba(255,255,255,.1));
  }

  .feed-upcoming-nav--prev{
    left:10px;
  }

  .feed-upcoming-nav--next{
    right:10px;
  }
}

.catch-foot-actions{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:center;
  margin-top:12px;
}

.catch-add-btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:54px;
  height:54px;
  padding:0;
  border-radius:999px;
  border:1px solid rgba(78,161,255,.5);
  background:rgba(78,161,255,.24);
  color:var(--text);
  font-size:2rem;
  font-weight:800;
  line-height:1;
}

.catch-add-btn--top{
  display:none;
}

.documents-grid{
  display:grid;
  gap:12px;
  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
}

.documents-card{
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  background:rgba(255,255,255,.03);
}

.documents-card h5{
  margin:0 0 8px;
}

.documents-card p{
  margin:0 0 10px;
  color:var(--muted);
}

.documents-link{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-height:34px;
  padding:0 12px;
  border-radius:999px;
  border:1px solid rgba(78,161,255,.7);
  text-decoration:none;
  color:var(--text);
  background:rgba(78,161,255,.16);
}

.documents-link:hover{
  filter:brightness(1.08);
}

.documents-missing{
  color:#ff9d9d;
}

.maintenance-gate{
  position:fixed;
  inset:0;
  z-index:9999;
  background:rgba(6,10,18,.84);
  backdrop-filter:blur(4px);
  display:grid;
  place-items:center;
  padding:18px;
}

.maintenance-gate__box{
  width:min(92vw, 420px);
  border:1px solid var(--line);
  border-radius:14px;
  background:linear-gradient(180deg, rgba(24,31,47,.98), rgba(14,20,32,.98));
  padding:16px;
  display:grid;
  gap:10px;
}

.maintenance-gate__box h2{
  margin:0;
}

.maintenance-gate__form{
  display:grid;
  grid-template-columns:1fr auto;
  gap:8px;
}

.maintenance-gate__form input{
  min-height:40px;
}

.maintenance-gate__hint{
  opacity:.8;
}

.maintenance-gate__error{
  color:#ff9d9d;
  min-height:1.1em;
}

.catch-fab-stack{
  position:fixed;
  right:16px;
  bottom:16px;
  display:flex;
  gap:10px;
  z-index:1250;
}

/* Keep map visuals below global menus/popovers */
#waterMapCanvas .leaflet-pane{z-index: 300;}
#waterMapCanvas .leaflet-top,
#waterMapCanvas .leaflet-bottom{z-index: 350;}

.catch-home-btn{
  text-decoration:none;
}

.catch-add-btn--fab{
  position:static;
  box-shadow:0 10px 24px rgba(0,0,0,.35);
}

@media(min-width:900px){
  .app-grid{
    grid-template-columns:repeat(4, minmax(0, 1fr));
  }

  .work-checkin-inline{
    grid-template-columns:1fr auto;
    align-items:end;
  }

  .catch-add-btn--top{
    display:inline-flex;
  }

  .catch-fab-stack{
    display:none;
  }
}

@media(max-width:899px){
  .nav{position:relative}

  .portal-rail{
    bottom:calc(var(--space-2) + env(safe-area-inset-bottom, 0px));
    max-width:calc(100vw - (2 * 10px) - var(--pq-size) - var(--space-1));
  }

  .burger-popover{
    position:fixed;
    left:12px;
    right:12px;
    top:78px;
    width:auto;
    max-height:calc(100dvh - 92px);
    overflow:auto;
    overscroll-behavior:contain;
    -webkit-overflow-scrolling:touch;
    border-radius:14px;
    padding:12px;
  }

  .burger-popover a{
    padding:10px 12px;
  }

  .account-popover{
    right:0;
    max-width:min(90vw, 280px);
  }

  .feed-toolbar{
    flex-direction:column;
    align-items:flex-start;
  }

  .feed-post__head{
    grid-template-columns:1fr;
    grid-template-areas:
      "time"
      "title"
      "meta";
  }

  .feed-post__time{
    justify-self:end;
  }

  .feed-media--inline{
    float:none;
    width:100%;
    max-width:none;
    margin:.7rem 0;
  }

  .feed-media__item{
    min-height:150px;
    max-height:280px;
  }

  .feed-media__img{
    max-height:280px;
  }

  .feed-media--inline .feed-media__item{
    max-height:none;
    aspect-ratio: 16 / 10;
  }

  .feed-media--inline .feed-media__img{
    max-height:none;
    object-fit:cover;
  }

  .feed-mode-panel{
    padding:12px;
  }

  .feed-media-picker{
    padding:12px;
  }

  .ui-filter-row{
    grid-template-columns:1fr;
  }

  .documents-head__button{
    font-size:var(--font-secondary-rem);
  }

  .feed-media-picker__input::file-selector-button{
    display:block;
    width:100%;
    margin:0 0 8px;
  }

  #waterMapCanvas{
    height:380px !important;
  }

  .home-hero-slider__slide img{
    height:min(30vh, 300px);
  }
}

@media(max-width:640px){
  .container{
    padding:0 12px;
  }

  .main{
    padding:18px 0 40px;
  }

  .card__body{
    padding:14px;
  }

  .app-portal > h1{
    font-size:2.2rem;
    line-height:1.08;
    margin-bottom:8px;
  }

  .app-portal > p.small{
    font-size:.9rem;
    margin-bottom:8px;
  }

  .app-portal .app-grid{
    gap:10px;
    grid-template-columns:repeat(2, minmax(0, 1fr));
  }

  .app-portal .app-tile__icon{
    min-height:86px;
    border-radius:18px;
    font-size:2.05rem;
    font-weight:800;
    border-color:rgba(78,161,255,.72);
    background:rgba(78,161,255,.24);
  }

  .app-portal .app-tile__title{
    font-size:10px;
    line-height:1.15;
    font-weight:700;
    letter-spacing:.01em;
    text-align:center;
    display:block;
    word-break:break-word;
  }

  .app-portal .app-tile__desc{
    display:none;
  }

  .burger-popover{
    top:72px;
    left:10px;
    right:10px;
    max-height:calc(100dvh - 82px);
    font-size:1.08rem;
  }

  .account-toggle,
  .burger-toggle,
  .portal-quick-toggle{
    width:var(--touch-target-min);
    height:var(--touch-target-min);
  }

  .portal-quick-toggle{
    width:var(--pq-size);
    height:var(--pq-size);
  }

  .portal-quick-panel{
    width:min(92vw, 360px);
    top:0;
    bottom:0;
    max-height:none;
    border-radius:0;
  }

  #waterMapCanvas{
    height:320px !important;
  }

  #waterMapList .card__body{
    padding:9px 10px !important;
    gap:6px !important;
  }

  #waterMapList .card__body strong{
    font-size:11px !important;
    padding:6px 9px !important;
  }

  .home-hero-slider{
    border-radius:14px;
    margin-bottom:.8rem;
  }

  .home-hero-slider__slide img{
    height:min(25vh, 220px);
  }

  .home-hero-slider__slide figcaption{
    left:10px;
    bottom:10px;
    padding:6px 10px;
    font-size:.8rem;
  }

  .catch-dialog{
    --dialog-sheet-width:min(94vw, 420px);
    width:var(--dialog-sheet-width);
    max-width:var(--dialog-sheet-width);
    height:100dvh;
    max-height:100dvh;
    top:0;
    bottom:0;
    left:auto;
    right:0;
    margin:0 0 0 auto;
    border-radius:0;
    border:none;
    border-left:1px solid var(--line);
  }

  .catch-dialog__form{
    display:flex;
    flex-direction:column;
    gap:12px;
    height:100%;
    max-height:100%;
    overflow:auto;
    -webkit-overflow-scrolling:touch;
    padding:14px 14px max(16px, env(safe-area-inset-bottom));
  }

  body[data-portal-rail-side="left"] .catch-dialog{
    right:auto;
    left:0;
    margin:0 auto 0 0;
    border-left:0;
    border-right:1px solid var(--line);
  }

  .catch-dialog__form .grid{
    grid-template-columns:1fr;
    gap:10px;
  }

  .catch-dialog__form label{
    margin:0;
  }

  .catch-dialog__form input,
  .catch-dialog__form select,
  .catch-dialog__form textarea{
    min-height:46px;
    font-size:16px;
  }

  .catch-dialog__form textarea{
    min-height:104px;
  }

  .catch-table__head{
    display:none;
  }

  .catch-row{
    grid-template-columns:95px 1fr 52px;
    gap:10px;
  }

  .catch-row__date{
    font-size:.86rem;
  }

  .catch-dialog__actions{
    position:sticky;
    bottom:0;
    margin-top:auto;
    padding:10px 0 4px;
    display:grid;
    grid-template-columns:1fr 1fr;
    background:linear-gradient(180deg, rgba(16,20,28,.2), rgba(16,20,28,.95) 38%);
  }

  .catch-dialog__actions .feed-btn{
    width:100%;
    min-height:46px;
  }

  .work-qr-box img{
    width:120px;
    height:120px;
  }

  .member-card-top{
    grid-template-columns:1fr;
  }

  .card-qr-flip{
    width:100%;
    max-width:190px;
    min-height:172px;
    justify-self:start;
  }

  .card-qr-flip__inner{
    min-height:172px;
  }

  .card-qr-flip__face{
    padding:8px;
  }

  .card-qr-flip__face img{
    width:120px;
    height:120px;
  }
}

@media (max-width: 1024px) and (min-width: 641px){
  .catch-dialog{
    --dialog-sheet-width:min(88vw, 500px);
  }
}

@media (max-width: 460px){
  .catch-dialog{
    --dialog-sheet-width:min(96vw, 380px);
  }
}

@media (prefers-reduced-motion: reduce){
  .home-hero-slider__track{
    animation:none;
    width:100%;
  }
  .home-hero-slider__slide{
    flex:0 0 100%;
  }
}
