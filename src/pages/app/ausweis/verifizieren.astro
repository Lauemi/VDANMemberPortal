---
import Site from "../../../layouts/Site.astro";
import { APP } from "../../../config/app";
---

<Site title={`Ausweis prüfen • ${APP.name}`} description="Mitgliedsausweis verifizieren" robots="noindex">
  <section class="card" style="max-width:780px;margin:0 auto;">
    <div class="card__body">
      <h1>Ausweis verifizieren</h1>
      <p class="small">Nur für Vorstand/Admin. QR scannen oder Ausweis-ID + Schlüssel manuell eingeben.</p>
      <p id="memberCardVerifyMsg" class="small" aria-live="polite"></p>

      <div class="grid" style="gap:14px;">
        <div class="card">
          <div class="card__body">
            <h3>QR-Scan</h3>
            <video id="cardVerifyVideo" playsinline style="width:100%;max-height:280px;border:1px solid var(--line);border-radius:10px;background:#000"></video>
            <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap;">
              <button id="cardVerifyScanStart" type="button" class="feed-btn">Scanner starten</button>
              <button id="cardVerifyScanStop" type="button" class="feed-btn feed-btn--ghost">Scanner stoppen</button>
            </div>
            <p class="small">Falls Kamera/Browser QR nicht unterstützt, manuell prüfen.</p>
          </div>
        </div>

        <div class="card">
          <div class="card__body">
            <h3>Manuelle Prüfung</h3>
            <div class="grid" style="gap:8px;">
              <label>
                <span class="small">Ausweis-ID</span>
                <input id="cardVerifyId" type="text" placeholder="z. B. MC-AB12CD34EF" />
              </label>
              <label>
                <span class="small">Gültigkeitsschlüssel</span>
                <input id="cardVerifyKey" type="text" placeholder="z. B. 9F2A4D18BC73" />
              </label>
              <div>
                <button id="cardVerifyBtn" type="button" class="feed-btn">Jetzt prüfen</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <article id="cardVerifyResult" class="card" style="margin-top:14px;">
        <div class="card__body">
          <p class="small">Noch keine Prüfung durchgeführt.</p>
        </div>
      </article>

      <div style="margin-top:10px;">
        <button id="cardRotateBtn" type="button" class="feed-btn feed-btn--ghost" disabled>Schlüssel rotieren</button>
      </div>
    </div>
  </section>

  <script src="/js/member-card-verify.js" defer></script>
</Site>
