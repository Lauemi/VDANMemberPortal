---
import Site from "../../../layouts/Site.astro";
import { APP } from "../../../config/app";
---

<Site title={`Meine Zuständigkeiten • ${APP.name}`} description="Meine Aufgaben und Leitungen" robots="noindex">
  <section class="card">
    <div class="card__body">
      <h1>Meine Zuständigkeiten</h1>
      <p class="small">Hier siehst du nur deine zugewiesenen Aufgaben und Leitungen.</p>
      <p id="myRespMsg" class="small" aria-live="polite"></p>

      <h2>Sitzungstasks</h2>
      <div class="ui-filter-row">
        <label>
          <span>Suche</span>
          <input id="myRespTaskSearch" type="search" placeholder="Task durchsuchen" />
        </label>
        <label>
          <span>Status</span>
          <select id="myRespTaskStatusFilter">
            <option value="alle">Alle</option>
            <option value="open">offen</option>
            <option value="done">erledigt</option>
            <option value="blocked">blockiert</option>
          </select>
        </label>
        <label>
          <span>Ansicht</span>
          <div class="ui-view-toggle" role="group" aria-label="Ansicht">
            <button type="button" class="feed-btn" id="myRespTaskViewZeileBtn">Ansicht Zeile</button>
            <button type="button" class="feed-btn feed-btn--ghost" id="myRespTaskViewKarteBtn">Ansicht Karte</button>
          </div>
        </label>
      </div>
      <div id="myRespMeetingTasksTableWrap" class="catch-table">
        <div class="catch-table__head" style="grid-template-columns:2fr 1fr 1fr">
          <span>Task</span>
          <span>Status</span>
          <span>Fällig</span>
        </div>
        <div id="myRespMeetingTasksTable"></div>
      </div>
      <div id="myRespMeetingTasksCards" class="grid hidden" hidden></div>

      <hr />
      <h2>Arbeitseinsatz-Leitungen</h2>
      <div class="ui-filter-row">
        <label>
          <span>Suche</span>
          <input id="myRespLeadSearch" type="search" placeholder="Titel oder Ort durchsuchen" />
        </label>
        <label>
          <span>Ansicht</span>
          <div class="ui-view-toggle" role="group" aria-label="Ansicht">
            <button type="button" class="feed-btn" id="myRespLeadViewZeileBtn">Ansicht Zeile</button>
            <button type="button" class="feed-btn feed-btn--ghost" id="myRespLeadViewKarteBtn">Ansicht Karte</button>
          </div>
        </label>
      </div>
      <div id="myRespWorkLeadsTableWrap" class="catch-table">
        <div class="catch-table__head" style="grid-template-columns:1.8fr 1fr 1fr 1fr">
          <span>Titel</span>
          <span>Status</span>
          <span>Start</span>
          <span>Ort</span>
        </div>
        <div id="myRespWorkLeadsTable"></div>
      </div>
      <div id="myRespWorkLeadsCards" class="grid hidden" hidden></div>
    </div>
  </section>

  <dialog id="myRespTaskDialog" class="catch-dialog">
    <form method="dialog" class="catch-dialog__form">
      <h3>Task aktualisieren</h3>
      <div class="resp-form-grid">
        <label>
          <span>Status</span>
          <select id="myRespEditStatus">
            <option value="open">offen</option>
            <option value="done">erledigt</option>
            <option value="blocked">blockiert</option>
          </select>
        </label>
        <label class="resp-full">
          <span>Status-Notiz</span>
          <input id="myRespEditNote" type="text" maxlength="200" />
        </label>
      </div>
      <div class="catch-dialog__actions">
        <button type="button" id="myRespEditSave" class="feed-btn">Speichern</button>
        <button type="button" id="myRespEditClose" class="feed-btn feed-btn--ghost">Schließen</button>
      </div>
      <p id="myRespEditMsg" class="small" aria-live="polite"></p>
    </form>
  </dialog>

  <dialog id="myRespLeadDetailDialog" class="catch-dialog">
    <form method="dialog" class="catch-dialog__form">
      <h3>Details</h3>
      <div id="myRespLeadDetailBody" class="catch-dialog__body"></div>
      <div class="catch-dialog__actions">
        <button type="submit" class="feed-btn">Schließen</button>
      </div>
    </form>
  </dialog>

  <script src="/js/responsibilities-my.js" defer></script>
</Site>
